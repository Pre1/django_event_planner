{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block content %}

<div class="card-body my-2">
    <h5 class="card-title">{{event.title}}</h5>
    <p class="card-text">{{event.description}}</p>
    <p class="card-text"> Date: {{event.date}} {{event.time}}</p>
    <p class="card-text">{{event.seats}}</p>
    <p class="card-text">{{event.ticket_left}}</p>
    <p class="card-text">{{event.organized_by}}</p>
    <br>

  <a href="{% url 'booking-event' event.id %}" class="btn btn-outline-info btn-block">Book</a>
  <p class="card-text">
      <form action="{% url 'booking-event' event.id %}" method="POST" enctype="multipart/form-data">
          {% csrf_token %}
          {{form|crispy}}
          <input type="submit" value="Book" class="btn btn-outline-info btn-block">
      </form>
  </p>
</div>
 <div class="card-body">
    <table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">User</th>
      <th scope="col">Tickets</th>
      <th scope="col">Date and Time of Booking</th>
    </tr>
  </thead>
  <tbody>
    {% for book in booking %}
    <tr>
      <th scope="row">{{book.user.username}}</th>
      <td>{{book.ticket_num}}</td>
      <td>{{book.date}}  {{book.event.ticket_left}}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>

    {% if request.user.is_staff or request.user == event.organized_by %}
    <a href="{% url 'event-update' event.id %}" class="btn btn-outline-info btn-block">Update</a>
    {% endif %}
    
  </div>







{% endblock %}